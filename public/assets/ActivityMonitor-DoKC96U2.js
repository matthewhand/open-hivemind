import{o as f,f as p,j as e,r,I as T,R as C,a9 as L,y as E,w as c,v as G}from"./index-RnQI40tk.js";import{T as D}from"./Tooltip-Dgbn0XIi.js";import{T as U}from"./TrendingUp-RKLNYHtx.js";import{T as _}from"./TextField-DC-0rrgg.js";import{S as W}from"./Search-CuJTsyps.js";import{a as M,I as A,S as R}from"./Select-iYrgATPy.js";import{M as t}from"./MenuItem-BPtXnqpM.js";const J=f([p.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),p.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")]),k=f(p.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"})),q=f(p.jsx("path",{d:"m16 18 2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6z"})),z=({children:d,variant:v="primary",size:m="md",className:x=""})=>{const g=()=>{const l={primary:"badge-primary",secondary:"badge-secondary",accent:"badge-accent",info:"badge-info",success:"badge-success",warning:"badge-warning",error:"badge-error",ghost:"badge-ghost"};return l[v]||l.primary},n=()=>{const l={xs:"badge-xs",sm:"badge-sm",md:"badge-md",lg:"badge-lg"};return l[m]||l.md};return e.jsx("span",{className:`badge ${g()} ${n()} ${x}`,children:d})},te=({showPopoutButton:d=!1,compact:v=!1,autoRefresh:m=!0})=>{const[x,g]=r.useState([]),[n,l]=r.useState([]),[o,O]=r.useState(null),[y,N]=r.useState(!0),[i,F]=r.useState(""),[h,B]=r.useState("all"),[u,P]=r.useState("all"),[V,$]=r.useState(new Date),H=()=>({events:[{id:"1",timestamp:new Date().toISOString(),type:"message",severity:"info",source:"Discord Bot #1",user:"user123",message:"Message processed successfully",details:{channel:"general",responseTime:245}},{id:"2",timestamp:new Date(Date.now()-3e5).toISOString(),type:"command",severity:"success",source:"Telegram Bot",user:"admin",message:"Status command executed",details:{executionTime:120}},{id:"3",timestamp:new Date(Date.now()-6e5).toISOString(),type:"error",severity:"error",source:"API Gateway",message:"Rate limit exceeded",details:{endpoint:"/api/v1/messages",limit:100}},{id:"4",timestamp:new Date(Date.now()-9e5).toISOString(),type:"system",severity:"warning",source:"System Monitor",message:"High memory usage detected",details:{usage:"87%",threshold:"80%"}},{id:"5",timestamp:new Date(Date.now()-12e5).toISOString(),type:"api_call",severity:"info",source:"LLM Service",user:"bot456",message:"OpenAI API call completed",details:{model:"gpt-4",tokens:150,cost:"$0.003"}}],stats:{totalEvents:1247,eventsToday:89,errorRate:2.3,avgResponseTime:285,topSources:[{name:"Discord Bot #1",count:342},{name:"Telegram Bot",count:287},{name:"API Gateway",count:198},{name:"LLM Service",count:156}]}}),j=()=>{N(!0),setTimeout(()=>{const{events:s,stats:a}=H();g(s),O(a),$(new Date),N(!1)},500)};r.useEffect(()=>{if(j(),m){const s=setInterval(j,3e4);return()=>clearInterval(s)}},[m]),r.useEffect(()=>{let s=x;i&&(s=s.filter(a=>a.message.toLowerCase().includes(i.toLowerCase())||a.source.toLowerCase().includes(i.toLowerCase())||a.user?.toLowerCase().includes(i.toLowerCase()))),h!=="all"&&(s=s.filter(a=>a.type===h)),u!=="all"&&(s=s.filter(a=>a.severity===u)),l(s)},[x,i,h,u]);const w=s=>{switch(s){case"error":return"error";case"warning":return"warning";case"success":return"success";default:return"info"}},b=s=>{switch(s){case"message":return"ðŸ’¬";case"command":return"âš¡";case"error":return"âŒ";case"system":return"âš™ï¸";case"api_call":return"ðŸ”Œ";default:return"ðŸ“„"}},S=s=>new Date(s).toLocaleString(),I=()=>{const s=window.open("/activity","activity-monitor","width=1200,height=800,scrollbars=yes,resizable=yes,toolbar=no,menubar=no,location=no,status=no");s&&s.focus()};return v?e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Activity Monitor"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{title:"Refresh",children:e.jsx(T,{onClick:j,size:"small",children:e.jsx(C,{})})}),d&&e.jsx(D,{title:"Open in new window",children:e.jsx(T,{onClick:I,size:"small",children:e.jsx(k,{})})})]})]}),y?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(L,{})}):e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:n.slice(0,5).map(s=>e.jsx("div",{className:"bg-base-100 rounded-lg p-3 border border-base-300",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-xl",children:b(s.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(z,{size:"sm",color:w(s.severity),children:s.severity}),e.jsx("span",{className:"text-xs text-base-content/60",children:S(s.timestamp)})]}),e.jsx("p",{className:"text-sm font-medium truncate",children:s.message}),e.jsxs("p",{className:"text-xs text-base-content/60",children:[s.source," ",s.user&&`â€¢ ${s.user}`]})]})]})},s.id))})]}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Activity Monitor"}),e.jsxs("p",{className:"text-base-content/60",children:["Last updated: ",V.toLocaleTimeString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{onClick:j,variant:"outline",size:"sm",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Refresh"]}),d&&e.jsxs(E,{onClick:I,variant:"primary",size:"sm",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Popout"]})]})]}),o&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(c,{children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Total Events"}),e.jsx("div",{className:"stat-value text-2xl",children:o.totalEvents.toLocaleString()}),e.jsx("div",{className:"stat-desc",children:"All time activity"})]})}),e.jsx(c,{children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Events Today"}),e.jsx("div",{className:"stat-value text-2xl text-success",children:o.eventsToday}),e.jsxs("div",{className:"stat-desc flex items-center",children:[e.jsx(U,{className:"w-4 h-4 mr-1"}),"12% from yesterday"]})]})}),e.jsx(c,{children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Error Rate"}),e.jsxs("div",{className:"stat-value text-2xl text-error",children:[o.errorRate,"%"]}),e.jsxs("div",{className:"stat-desc flex items-center",children:[e.jsx(q,{className:"w-4 h-4 mr-1"}),"Down from last week"]})]})}),e.jsx(c,{children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Avg Response"}),e.jsxs("div",{className:"stat-value text-2xl",children:[o.avgResponseTime,"ms"]}),e.jsxs("div",{className:"stat-desc flex items-center",children:[e.jsx(J,{className:"w-4 h-4 mr-1"}),"Good performance"]})]})})]}),e.jsx(c,{className:"mb-6",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h3",{className:"card-title",children:"Filters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(_,{placeholder:"Search events...",value:i,onChange:s=>F(s.target.value),InputProps:{startAdornment:e.jsx(W,{className:"w-4 h-4 mr-2 text-base-content/60"})},className:"w-full"}),e.jsxs(M,{className:"w-full",children:[e.jsx(A,{children:"Event Type"}),e.jsxs(R,{value:h,onChange:s=>B(s.target.value),label:"Event Type",children:[e.jsx(t,{value:"all",children:"All Types"}),e.jsx(t,{value:"message",children:"Messages"}),e.jsx(t,{value:"command",children:"Commands"}),e.jsx(t,{value:"error",children:"Errors"}),e.jsx(t,{value:"system",children:"System"}),e.jsx(t,{value:"api_call",children:"API Calls"})]})]}),e.jsxs(M,{className:"w-full",children:[e.jsx(A,{children:"Severity"}),e.jsxs(R,{value:u,onChange:s=>P(s.target.value),label:"Severity",children:[e.jsx(t,{value:"all",children:"All Severities"}),e.jsx(t,{value:"info",children:"Info"}),e.jsx(t,{value:"success",children:"Success"}),e.jsx(t,{value:"warning",children:"Warning"}),e.jsx(t,{value:"error",children:"Error"})]})]})]})]})}),e.jsx(c,{children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("h3",{className:"card-title",children:["Activity Log",e.jsx(G,{color:"neutral",className:"ml-2",children:n.length})]})}),y?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(L,{size:"lg"})}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:n.map(s=>e.jsx("div",{className:"bg-base-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("span",{className:"text-2xl",children:b(s.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(z,{color:w(s.severity),children:s.severity.toUpperCase()}),e.jsx("span",{className:"text-sm text-base-content/60",children:S(s.timestamp)})]}),e.jsx("h4",{className:"font-semibold mb-1",children:s.message}),e.jsxs("p",{className:"text-sm text-base-content/80 mb-2",children:[e.jsx("strong",{children:"Source:"})," ",s.source,s.user&&e.jsxs("span",{children:[" â€¢ ",e.jsx("strong",{children:"User:"})," ",s.user]})]}),s.details&&e.jsxs("details",{className:"text-sm",children:[e.jsx("summary",{className:"cursor-pointer text-primary",children:"View Details"}),e.jsx("pre",{className:"mt-2 p-2 bg-base-300 rounded text-xs overflow-x-auto",children:JSON.stringify(s.details,null,2)})]})]})]})},s.id))})]})})]})};export{te as A};
