import{an as S,r as m,j as s}from"./index-RnQI40tk.js";const A=({alerts:x,onAcknowledge:f,onResolve:j,onDismiss:p,showFilters:v=!0,maxAlerts:g=50,className:w=""})=>{const{alerts:u}=S(),[i,c]=m.useState([]),[r,d]=m.useState("all"),[l,N]=m.useState("");m.useEffect(()=>{const n=[...x||[],...u.map((t,a)=>({id:t.id||`ws-${a}`,type:t.severity||"info",title:t.title||"System Alert",message:t.message||"",timestamp:t.timestamp||new Date().toISOString(),source:t.source||"System",acknowledged:!1,resolved:!1,metadata:t.metadata}))].sort((t,a)=>new Date(a.timestamp).getTime()-new Date(t.timestamp).getTime()).slice(0,g);c(n)},[x,u,g]);const h=i.filter(e=>{const n=r==="all"||e.type===r,t=!l||e.title.toLowerCase().includes(l.toLowerCase())||e.message.toLowerCase().includes(l.toLowerCase())||e.source.toLowerCase().includes(l.toLowerCase());return n&&t}),b=e=>{c(n=>n.map(t=>t.id===e?{...t,acknowledged:!0}:t)),f?.(e)},k=e=>{c(n=>n.map(t=>t.id===e?{...t,resolved:!0}:t)),j?.(e)},y=e=>{c(n=>n.filter(t=>t.id!==e)),p?.(e)},o=e=>i.filter(n=>n.type===e&&!n.resolved).length,L=e=>{switch(e){case"error":return s.jsx("svg",{className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})});case"warning":return s.jsx("svg",{className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.082 16.5c-.77.833.192 2.5 1.732 2.5z"})});case"success":return s.jsx("svg",{className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return s.jsx("svg",{className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}},C=e=>{const n=new Date(e),a=new Date().getTime()-n.getTime();return a<6e4?"Just now":a<36e5?`${Math.floor(a/6e4)}m ago`:a<864e5?`${Math.floor(a/36e5)}h ago`:n.toLocaleDateString()};return s.jsx("div",{className:`card bg-base-100 shadow-xl ${w}`,children:s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"card-title",children:"Alerts & Notifications"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"badge badge-error gap-2",children:[o("error")," Errors"]}),s.jsxs("div",{className:"badge badge-warning gap-2",children:[o("warning")," Warnings"]}),s.jsxs("div",{className:"badge badge-info gap-2",children:[o("info")," Info"]})]})]}),v&&s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{className:`btn btn-sm ${r==="all"?"btn-primary":"btn-ghost"}`,onClick:()=>d("all"),children:["All (",i.filter(e=>!e.resolved).length,")"]}),s.jsxs("button",{className:`btn btn-sm ${r==="error"?"btn-error":"btn-ghost"}`,onClick:()=>d("error"),children:["Errors (",o("error"),")"]}),s.jsxs("button",{className:`btn btn-sm ${r==="warning"?"btn-warning":"btn-ghost"}`,onClick:()=>d("warning"),children:["Warnings (",o("warning"),")"]}),s.jsxs("button",{className:`btn btn-sm ${r==="info"?"btn-info":"btn-ghost"}`,onClick:()=>d("info"),children:["Info (",o("info"),")"]})]}),s.jsx("div",{className:"form-control",children:s.jsx("input",{type:"text",placeholder:"Search alerts...",className:"input input-bordered input-sm w-full",value:l,onChange:e=>N(e.target.value)})})]}),s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:h.length===0?s.jsxs("div",{className:"text-center py-8 text-neutral-content/50",children:[s.jsx("div",{className:"text-4xl mb-2",children:"ðŸ””"}),s.jsx("p",{children:"No alerts found"})]}):h.map(e=>s.jsxs("div",{className:`alert ${e.resolved?"alert-success":`alert-${e.type}`} ${e.acknowledged&&!e.resolved?"opacity-75":""}`,children:[L(e.type),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:e.title}),s.jsx("p",{className:"text-sm opacity-90",children:e.message}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("span",{className:"text-xs opacity-70",children:e.source}),s.jsx("span",{className:"text-xs opacity-70",children:"â€¢"}),s.jsx("span",{className:"text-xs opacity-70",children:C(e.timestamp)}),e.acknowledged&&s.jsx("span",{className:"badge badge-success badge-xs",children:"Acknowledged"}),e.resolved&&s.jsx("span",{className:"badge badge-success badge-xs",children:"Resolved"})]})]}),s.jsxs("div",{className:"flex gap-1",children:[!e.acknowledged&&!e.resolved&&s.jsx("button",{className:"btn btn-xs btn-ghost",onClick:()=>b(e.id),title:"Acknowledge",children:"âœ“"}),!e.resolved&&s.jsx("button",{className:"btn btn-xs btn-ghost",onClick:()=>k(e.id),title:"Resolve",children:"âœ“âœ“"}),s.jsx("button",{className:"btn btn-xs btn-ghost",onClick:()=>y(e.id),title:"Dismiss",children:"Ã—"})]})]})})]},e.id))}),i.length>0&&s.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[s.jsxs("span",{className:"text-sm text-neutral-content/70",children:["Showing ",h.length," of ",i.length," alerts"]}),s.jsx("button",{className:"btn btn-sm btn-ghost",onClick:()=>{i.forEach(e=>{!e.acknowledged&&!e.resolved&&b(e.id)})},children:"Acknowledge All"})]})]})})};export{A};
