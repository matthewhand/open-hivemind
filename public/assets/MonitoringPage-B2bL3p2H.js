import{j as e,B as o,c as g,T as t,Z as N,b as C,R as M,A as S,C as j,a as f,r as l,_ as R}from"./index-RnQI40tk.js";import{G as x}from"./Grid-CKtzxHFY.js";import{S as p}from"./Stack-SvpvuKJv.js";import{V as U,T as D}from"./VisualFeedback-BeVbBwUT.js";import"./react-Dqn7FESC.js";import"./redux-CHunf9nH.js";import"./charts-BQCo6uAH.js";import"./router-muBVCOlq.js";const E=({message:s="Loading...",size:n=40,fullScreen:a=!1})=>{const i=e.jsxs(o,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2,p:3,children:[e.jsx(g,{size:n}),s&&e.jsx(t,{variant:"body2",color:"text.secondary",children:s})]});return a?e.jsx(o,{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",width:"100%",children:i}):i},L={cpuUsage:0,memoryUsage:0,responseTime:0,errorRate:0,uptime:0,activeConnections:0},T=s=>{if(!s)return"Unknown error";if(typeof s=="string")return s;const n=s;if(typeof n?.status<"u")return typeof n.data=="string"?n.data:typeof n.status=="number"?`Request failed with status ${n.status}`:"Performance service unavailable";const a=s;return a?.message?a.message:"Unexpected error while fetching performance metrics"},B=()=>{const{data:s,error:n,isLoading:a,isFetching:i,refetch:h}=N(void 0,{pollingInterval:5e3}),r=s??L,m=n?T(n):null;if(a&&!s)return e.jsx(E,{message:"Loading performance data..."});const u=r.cpuUsage??0,c=r.memoryUsage??0,d=r.responseTime??0,y=r.errorRate??0,v=r.uptime??0,b=r.activeConnections??0,w=Math.floor(v/3600),k=Math.floor(v%3600/60);return e.jsxs(o,{sx:{p:3},children:[e.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsxs(o,{children:[e.jsx(t,{variant:"h4",gutterBottom:!0,children:"Performance Monitor"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"Real-time metrics for Open-Hivemind services"})]}),e.jsx(C,{variant:"outlined",startIcon:i?e.jsx(g,{size:18}):e.jsx(M,{}),onClick:()=>h(),disabled:i,children:"Refresh"})]}),m&&e.jsx(S,{severity:"error",sx:{mb:3},children:m}),e.jsxs(x,{container:!0,spacing:2,children:[e.jsx(x,{item:!0,xs:12,md:6,children:e.jsx(j,{elevation:1,children:e.jsxs(f,{children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Resource Utilisation"}),e.jsxs(p,{spacing:1.5,sx:{mt:1},children:[e.jsxs(t,{variant:"body1",children:["CPU Usage: ",u.toFixed(1),"%"]}),e.jsxs(t,{variant:"body1",children:["Memory Usage: ",c.toFixed(1),"%"]}),e.jsxs(t,{variant:"body1",children:["Active Connections: ",b]})]})]})})}),e.jsx(x,{item:!0,xs:12,md:6,children:e.jsx(j,{elevation:1,children:e.jsxs(f,{children:[e.jsx(t,{variant:"h6",gutterBottom:!0,children:"Latency & Reliability"}),e.jsxs(p,{spacing:1.5,sx:{mt:1},children:[e.jsxs(t,{variant:"body1",children:["Response Time: ",d.toFixed(1)," ms"]}),e.jsxs(t,{variant:"body1",children:["Error Rate: ",y.toFixed(2),"%"]}),e.jsxs(t,{variant:"body1",children:["Uptime: ",w,"h ",k,"m"]})]})]})})})]}),i&&e.jsxs(p,{direction:"row",alignItems:"center",spacing:1.5,sx:{mt:3},children:[e.jsx(g,{size:20}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"Updating metrics..."})]})]})},A=()=>{const[s,n]=l.useState(null),[a,i]=l.useState([]),[h,r]=l.useState([]),[m,u]=l.useState(!1);return l.useEffect(()=>{const c=R("/webui");return c.on("connect",()=>{console.log("WebSocket connected"),u(!0)}),c.on("disconnect",()=>{console.log("WebSocket disconnected"),u(!1)}),c.on("messageFlowUpdate",d=>{console.log("Received message flow update:",d),i(d)}),c.on("performanceMetricsUpdate",d=>{console.log("Received performance metrics update:",d),r(d)}),n(c),()=>{c.close()}},[]),{socket:s,messages:a,metrics:h,connected:m}},V=()=>{const{connect:s,disconnect:n,isConnected:a}=A(),[i,h]=l.useState([]),r=[{name:"CPU Usage",value:45,unit:"%"},{name:"Memory Usage",value:78,unit:"%"},{name:"Response Time",value:125,unit:"ms"}],m=[{id:"1",timestamp:new Date(Date.now()-5*60*1e3),title:"System Health Check Completed",description:"All services are running normally",type:"success",metadata:{service:"health-monitor",status:"healthy"},details:e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"stats stats-vertical lg:stats-horizontal shadow",children:[e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Services"}),e.jsx("div",{className:"stat-value text-success",children:"12/12"}),e.jsx("div",{className:"stat-desc",children:"All operational"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:"Response Time"}),e.jsx("div",{className:"stat-value text-info",children:"125ms"}),e.jsx("div",{className:"stat-desc",children:"Average"})]})]})})},{id:"2",timestamp:new Date(Date.now()-15*60*1e3),title:"High Memory Usage Detected",description:"Memory usage has exceeded 80% threshold",type:"warning",metadata:{service:"memory-monitor",usage:"85%"},details:e.jsxs("div",{className:"alert alert-warning",children:[e.jsx("svg",{className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("span",{children:"Consider scaling up resources or optimizing memory usage"})]})},{id:"3",timestamp:new Date(Date.now()-30*60*1e3),title:"Database Connection Restored",description:"Connection to primary database has been re-established",type:"success",metadata:{service:"database",connection:"primary"}},{id:"4",timestamp:new Date(Date.now()-45*60*1e3),title:"Database Connection Failed",description:"Lost connection to primary database, switching to backup",type:"error",metadata:{service:"database",connection:"primary",backup:"active"},details:e.jsxs("div",{className:"alert alert-error",children:[e.jsx("svg",{className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"Automatic failover to backup database successful"})]})},{id:"5",timestamp:new Date(Date.now()-60*60*1e3),title:"Scheduled Maintenance Started",description:"System maintenance window has begun",type:"info",metadata:{type:"maintenance",duration:"30min"}}];return l.useEffect(()=>(s(),h(m),()=>{n()}),[s,n]),e.jsxs(o,{children:[e.jsx(t,{variant:"h4",component:"h1",gutterBottom:!0,children:"System Monitoring"}),e.jsxs(t,{variant:"body1",color:"text.secondary",sx:{mb:3},children:["Real-time performance metrics and system health monitoring.",a?" (Live updates enabled)":" (Connecting...)"]}),e.jsx(o,{sx:{mb:4},children:e.jsx(U,{metrics:r,initialRating:4})}),e.jsx(o,{sx:{mb:4},children:e.jsx(B,{})}),e.jsxs(o,{sx:{mb:4},children:[e.jsx(t,{variant:"h5",component:"h2",gutterBottom:!0,children:"System Activity"}),e.jsx(t,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Recent system events and audit logs"}),e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"card-title",children:"Activity Timeline"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"badge badge-success gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-success rounded-full"}),"Success"]}),e.jsxs("div",{className:"badge badge-warning gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-warning rounded-full"}),"Warning"]}),e.jsxs("div",{className:"badge badge-error gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-error rounded-full"}),"Error"]}),e.jsxs("div",{className:"badge badge-info gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-info rounded-full"}),"Info"]})]})]}),e.jsx(D,{events:i,viewMode:"detailed",showTimestamps:!0,autoScroll:!0,maxEvents:20,onEventClick:u=>console.log("Event clicked:",u),className:"max-h-96 overflow-y-auto"})]})})]})]})};export{V as default};
