import{r as c,j as e,B as n,T as a,z as w,A as D,b as i,R as u,C as p,a as j,az as W,t as x}from"./index-RnQI40tk.js";import{G as l}from"./Grid-CKtzxHFY.js";import{a as M,I as E,S as O}from"./Select-iYrgATPy.js";import{M as m}from"./MenuItem-BPtXnqpM.js";import{L as v}from"./Launch-Dk4GyXSX.js";import"./react-Dqn7FESC.js";import"./redux-CHunf9nH.js";import"./charts-BQCo6uAH.js";import"./router-muBVCOlq.js";import"./useSlotProps-CNI6Fs2q.js";import"./useControlled-BELcKehV.js";import"./listItemIconClasses-DBQaSeYT.js";import"./dividerClasses-CCiAYvGY.js";const Q=()=>{const[d,S]=c.useState(null),[C,f]=c.useState(!0),[g,b]=c.useState(null),[o,I]=c.useState("all"),y=[{label:"Sitemap",href:"/uber/sitemap",isActive:!0}],h=async()=>{f(!0),b(null);try{const s=o!=="all"?`?access=${o}`:"",r=await fetch(`/sitemap.json${s}`);if(!r.ok)throw new Error("Failed to fetch sitemap");const t=await r.json();S(t)}catch(s){b(s instanceof Error?s.message:"Unknown error occurred")}finally{f(!1)}};c.useEffect(()=>{h()},[o]);const k=s=>{switch(s){case"public":return"success";case"authenticated":return"warning";case"owner":return"error";default:return"default"}},A=s=>s>=.8?"success":s>=.5?"warning":"default",L=()=>{const s=o!=="all"?`?access=${o}`:"";window.open(`/sitemap.xml${s}`,"_blank")},B=s=>{window.open(s,"_blank","noopener,noreferrer")},P=d?.urls.reduce((s,r)=>{let t="Other";return r.url==="/"?t="Root":r.url.startsWith("/uber")?r.url.includes("/bots")?t="Bot Management":r.url.includes("/mcp")?t="MCP Servers":r.url.includes("/monitoring")||r.url.includes("/activity")?t="Monitoring":r.url.includes("/settings")?t="Settings":t="Main Dashboard":r.url.startsWith("/webui")||r.url.startsWith("/admin")?t="Legacy Interfaces":r.url.startsWith("/health")||r.url.startsWith("/api")?t="System APIs":r.url==="/login"&&(t="Authentication"),s[t]||(s[t]=[]),s[t].push(r),s},{})||{};return C?e.jsx(n,{sx:{p:3,textAlign:"center"},children:e.jsx(a,{children:"Loading sitemap..."})}):g?e.jsxs(n,{sx:{p:3},children:[e.jsx(w,{items:y}),e.jsxs(D,{severity:"error",sx:{mt:2},children:["Error loading sitemap: ",g]}),e.jsx(i,{onClick:h,startIcon:e.jsx(u,{}),sx:{mt:2},children:"Retry"})]}):e.jsxs(n,{sx:{p:3},children:[e.jsx(w,{items:y}),e.jsxs(n,{sx:{mt:2,mb:4},children:[e.jsx(a,{variant:"h4",gutterBottom:!0,children:"🗺️ Dynamic Sitemap"}),e.jsx(a,{variant:"body1",color:"text.secondary",children:"Complete navigation structure and page hierarchy"})]}),e.jsxs(l,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(l,{item:!0,xs:12,sm:6,md:3,children:e.jsx(p,{children:e.jsxs(j,{children:[e.jsx(a,{color:"textSecondary",gutterBottom:!0,children:"Total Pages"}),e.jsx(a,{variant:"h4",children:d?.totalUrls||0})]})})}),e.jsx(l,{item:!0,xs:12,sm:6,md:3,children:e.jsx(p,{children:e.jsxs(j,{children:[e.jsx(a,{color:"textSecondary",gutterBottom:!0,children:"Generated"}),e.jsx(a,{variant:"body1",children:d?new Date(d.generated).toLocaleString():"N/A"})]})})}),e.jsx(l,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(M,{fullWidth:!0,children:[e.jsx(E,{children:"Access Level"}),e.jsxs(O,{value:o,label:"Access Level",onChange:s=>I(s.target.value),children:[e.jsx(m,{value:"all",children:"All Pages"}),e.jsx(m,{value:"public",children:"Public Only"}),e.jsx(m,{value:"authenticated",children:"Authenticated"}),e.jsx(m,{value:"owner",children:"Owner Only"})]})]})}),e.jsx(l,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(n,{sx:{display:"flex",gap:1,height:"100%",alignItems:"center"},children:[e.jsx(i,{variant:"outlined",onClick:L,startIcon:e.jsx(W,{}),fullWidth:!0,children:"Download XML"}),e.jsx(i,{variant:"outlined",onClick:h,startIcon:e.jsx(u,{}),children:e.jsx(u,{})})]})})]}),Object.entries(P).map(([s,r])=>e.jsxs(n,{sx:{mb:4},children:[e.jsxs(a,{variant:"h5",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[s,e.jsx(x,{label:r.length,size:"small"})]}),e.jsx(l,{container:!0,spacing:2,children:r.map((t,z)=>e.jsx(l,{item:!0,xs:12,md:6,lg:4,children:e.jsx(p,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:e.jsxs(j,{sx:{flexGrow:1},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[e.jsx(a,{variant:"h6",component:"h3",sx:{fontFamily:"monospace",fontSize:"0.9rem",wordBreak:"break-all"},children:t.url}),e.jsx(i,{size:"small",onClick:()=>B(t.fullUrl),startIcon:e.jsx(v,{}),sx:{ml:1,minWidth:"auto"},children:e.jsx(v,{fontSize:"small"})})]}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:t.description}),e.jsxs(n,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:[e.jsx(x,{label:t.access,color:k(t.access),size:"small"}),e.jsx(x,{label:`Priority: ${t.priority}`,color:A(t.priority),size:"small",variant:"outlined"}),e.jsx(x,{label:t.changefreq,size:"small",variant:"outlined"})]}),e.jsxs(a,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.8rem"},children:["Last modified: ",new Date(t.lastmod).toLocaleString()]})]})})},z))})]},s)),e.jsxs(n,{sx:{mt:4,p:3,bgcolor:"grey.100",borderRadius:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Sitemap Formats"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Access the sitemap in different formats:"}),e.jsxs(n,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(i,{variant:"outlined",onClick:()=>window.open("/sitemap.xml","_blank"),children:"XML Sitemap (SEO)"}),e.jsx(i,{variant:"outlined",onClick:()=>window.open("/sitemap.json","_blank"),children:"JSON API"}),e.jsx(i,{variant:"outlined",onClick:()=>window.open("/sitemap","_blank"),children:"Human-Readable HTML"})]})]})]})};export{Q as default};
