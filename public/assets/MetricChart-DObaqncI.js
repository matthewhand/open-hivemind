import{r as n,j as e}from"./index-RnQI40tk.js";import{L as p,b as N,A as b,B as w}from"./charts-BQCo6uAH.js";const z=({title:u,data:h,type:y="line",height:k=300,color:l="#3b82f6",unit:m="",showGrid:M=!0,showLegend:L=!0,showTooltip:S=!0,refreshInterval:c,onRefresh:i,className:A=""})=>{const[s,$]=n.useState([]),[C,j]=n.useState(!1),[g,B]=n.useState(null);n.useEffect(()=>{const t=h.map(a=>({time:new Date(a.timestamp).toLocaleTimeString(),value:a.value,label:a.label||"",category:a.category||"default"}));$(t)},[h]),n.useEffect(()=>{if(c&&i){const t=setInterval(()=>{j(!0),i(),setTimeout(()=>j(!1),1e3)},c);return()=>clearInterval(t)}},[c,i]);const E=()=>{const t={data:s,width:800,height:k-50,margin:{top:5,right:30,left:20,bottom:5}};switch(y){case"bar":return e.jsx(w,{...t,children:e.jsx(w,{dataKey:"value",fill:l})});case"area":return e.jsx(b,{...t,children:e.jsx(b,{type:"monotone",dataKey:"value",stroke:l,fill:l,fillOpacity:.3})});case"pie":return e.jsx(N,{...t,children:e.jsx(N,{dataKey:"value",cx:t.width/2,cy:t.height/2,outerRadius:80,fill:l})});default:return e.jsx(p,{...t,children:e.jsx(p,{type:"monotone",dataKey:"value",stroke:l,strokeWidth:2})})}},T=()=>s.length===0?"0":`${s[s.length-1].value}${m}`,D=()=>{if(s.length===0)return"0";const t=s.reduce((a,d)=>a+d.value,0);return`${Math.round(t/s.length)}${m}`},r=(()=>{if(s.length<2)return"stable";const t=s.slice(-5),a=s.slice(-10,-5);if(t.length===0||a.length===0)return"stable";const d=t.reduce((o,x)=>o+x.value,0)/t.length,f=a.reduce((o,x)=>o+x.value,0)/a.length,v=(d-f)/f*100;return v>5?"up":v<-5?"down":"stable"})(),K=r==="up"?"text-success":r==="down"?"text-error":"text-neutral";return e.jsx("div",{className:`card bg-base-100 shadow-xl ${A}`,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"card-title text-lg",children:u}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsx("div",{className:"stat-value text-2xl",children:T()}),e.jsxs("div",{className:"stat-desc",children:["Avg: ",D()]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[C&&e.jsx("div",{className:"loading loading-spinner loading-sm"}),e.jsxs("div",{className:`flex items-center gap-1 ${K}`,children:[r==="up"&&e.jsx("span",{className:"text-lg",children:"â†‘"}),r==="down"&&e.jsx("span",{className:"text-lg",children:"â†“"}),r==="stable"&&e.jsx("span",{className:"text-lg",children:"â†’"}),e.jsx("span",{className:"text-xs",children:r})]})]})]}),g&&e.jsxs("div",{className:"alert alert-error mb-4",children:[e.jsx("svg",{className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:g})]}),e.jsx("div",{className:"w-full overflow-x-auto",children:s.length>0?e.jsx("div",{className:"flex justify-center",children:E()}):e.jsx("div",{className:"flex items-center justify-center h-48 text-neutral-content/50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ“Š"}),e.jsx("p",{children:"No data available"})]})})}),L&&s.length>0&&e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:l}}),e.jsx("span",{className:"text-sm text-neutral-content/70",children:u})]})})]})})};export{z as M};
