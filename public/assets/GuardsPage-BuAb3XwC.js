import{j as e,r as t,B as m,T as c,P as w,b as g,t as h,U as C,A as I}from"./index-CfW5Kmkv.js";import{B as U,A as k}from"./redux-C2QYyN33.js";import{T as P}from"./TextField-DfWcAsup.js";import{A as D}from"./Add-MXkPRT6h.js";import{S as y}from"./Stack-CK-k20yu.js";import{D as E}from"./Delete-CNDa27Gp.js";import"./react-DmQZq9fT.js";import"./charts-BtkXjvbr.js";import"./router-CsXXBgad.js";import"./Select-pqBzk1v2.js";import"./index-Bri2vysU.js";import"./useSlotProps-C9-Zrq0h.js";const b=({label:d,radioSize:n,color:i,className:r,disabled:u,...a})=>{const f={xs:"radio-xs",sm:"radio-sm",md:"radio-md",lg:"radio-lg"},l={primary:"radio-primary",secondary:"radio-secondary",accent:"radio-accent"},o=["radio",n?f[n]:"",i?l[i]:"",r].filter(Boolean).join(" ");return e.jsxDEV("div",{className:"form-control",children:e.jsxDEV("label",{className:"label cursor-pointer",children:[d&&e.jsxDEV("span",{className:"label-text",children:d},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/components/DaisyUI/Radio.tsx",lineNumber:45,columnNumber:19},void 0),e.jsxDEV("input",{type:"radio",className:o,disabled:u,...a},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/components/DaisyUI/Radio.tsx",lineNumber:46,columnNumber:9},void 0)]},void 0,!0,{fileName:"/mnt/models/open-hivemind/src/client/src/components/DaisyUI/Radio.tsx",lineNumber:44,columnNumber:7},void 0)},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/components/DaisyUI/Radio.tsx",lineNumber:43,columnNumber:5},void 0)},J=()=>{U();const d=k(s=>s.config.guards),[n,i]=t.useState({type:"disabled",allowedUsers:[],allowedIPs:[]}),[r,u]=t.useState(""),[a,f]=t.useState(""),[l,o]=t.useState({open:!1,message:"",severity:"success"});t.useEffect(()=>{d&&i(d)},[d]);const p=s=>{i({...n,type:s.target.value})},v=()=>{r.trim()&&!n.allowedUsers.includes(r.trim())&&(i({...n,allowedUsers:[...n.allowedUsers,r.trim()]}),u(""))},j=s=>{i({...n,allowedUsers:n.allowedUsers.filter(N=>N!==s)})},x=()=>{a.trim()&&!n.allowedIPs.includes(a.trim())&&(i({...n,allowedIPs:[...n.allowedIPs,a.trim()]}),f(""))},G=s=>{i({...n,allowedIPs:n.allowedIPs.filter(N=>N!==s)})},V=async()=>{try{if(!(await fetch("/api/uber/guards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok)throw new Error("Failed to save guards configuration");o({open:!0,message:"Guards configuration saved successfully",severity:"success"})}catch(s){o({open:!0,message:s instanceof Error?s.message:"Failed to save guards configuration",severity:"error"})}};return e.jsxDEV(m,{children:[e.jsxDEV(c,{variant:"h4",component:"h1",gutterBottom:!0,children:"MCP Tool Guards"},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:112,columnNumber:7},void 0),e.jsxDEV(c,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Configure access controls for MCP tools. Guards determine who can execute MCP tool operations."},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:115,columnNumber:7},void 0),e.jsxDEV(w,{sx:{p:3},children:[e.jsxDEV("div",{className:"form-control w-full",children:[e.jsxDEV("label",{className:"label",children:e.jsxDEV("span",{className:"label-text font-bold",children:"Guard Type"},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:122,columnNumber:13},void 0)},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:121,columnNumber:11},void 0),e.jsxDEV("div",{className:"space-y-2 mb-6",children:[e.jsxDEV(b,{name:"guard-type",value:"disabled",checked:n.type==="disabled",onChange:p,label:"Disabled - No restrictions (anyone can use MCP tools)"},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:125,columnNumber:13},void 0),e.jsxDEV(b,{name:"guard-type",value:"owner",checked:n.type==="owner",onChange:p,label:"Owner Only - Only the server/forum owner can use MCP tools"},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:132,columnNumber:13},void 0),e.jsxDEV(b,{name:"guard-type",value:"users",checked:n.type==="users",onChange:p,label:"Specific Users - Only listed users can use MCP tools"},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:139,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:124,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:120,columnNumber:9},void 0),n.type==="users"&&e.jsxDEV(m,{sx:{mb:3},children:[e.jsxDEV(c,{variant:"h6",gutterBottom:!0,children:"Allowed Users"},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:151,columnNumber:13},void 0),e.jsxDEV(m,{sx:{display:"flex",gap:1,mb:2},children:[e.jsxDEV(P,{fullWidth:!0,label:"User ID or Username",value:r,onChange:s=>u(s.target.value),onKeyPress:s=>s.key==="Enter"&&v()},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:155,columnNumber:15},void 0),e.jsxDEV(g,{variant:"contained",startIcon:e.jsxDEV(D,{},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:164,columnNumber:28},void 0),onClick:v,disabled:!r.trim(),children:"Add"},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:162,columnNumber:15},void 0)]},void 0,!0,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:154,columnNumber:13},void 0),e.jsxDEV(y,{direction:"row",spacing:1,flexWrap:"wrap",children:n.allowedUsers.map(s=>e.jsxDEV(h,{label:s,onDelete:()=>j(s),deleteIcon:e.jsxDEV(E,{},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:177,columnNumber:31},void 0)},s,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:173,columnNumber:17},void 0))},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:171,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:150,columnNumber:11},void 0),e.jsxDEV(m,{sx:{mb:3},children:[e.jsxDEV(c,{variant:"h6",gutterBottom:!0,children:"Allowed IP Addresses (Optional)"},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:185,columnNumber:11},void 0),e.jsxDEV(c,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Restrict access to specific IP addresses. Leave empty to allow all IPs."},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:188,columnNumber:11},void 0),e.jsxDEV(m,{sx:{display:"flex",gap:1,mb:2},children:[e.jsxDEV(P,{fullWidth:!0,label:"IP Address (e.g., 192.168.1.1)",value:a,onChange:s=>f(s.target.value),onKeyPress:s=>s.key==="Enter"&&x()},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:192,columnNumber:13},void 0),e.jsxDEV(g,{variant:"contained",startIcon:e.jsxDEV(D,{},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:201,columnNumber:26},void 0),onClick:x,disabled:!a.trim(),children:"Add"},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:199,columnNumber:13},void 0)]},void 0,!0,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:191,columnNumber:11},void 0),e.jsxDEV(y,{direction:"row",spacing:1,flexWrap:"wrap",children:n.allowedIPs.map(s=>e.jsxDEV(h,{label:s,onDelete:()=>G(s),deleteIcon:e.jsxDEV(E,{},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:214,columnNumber:29},void 0),variant:"outlined"},s,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:210,columnNumber:15},void 0))},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:208,columnNumber:11},void 0)]},void 0,!0,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:184,columnNumber:9},void 0),e.jsxDEV(m,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsxDEV(g,{variant:"contained",onClick:V,size:"large",children:"Save Configuration"},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:222,columnNumber:11},void 0)},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:221,columnNumber:9},void 0)]},void 0,!0,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:119,columnNumber:7},void 0),e.jsxDEV(C,{open:l.open,autoHideDuration:6e3,onClose:()=>o({...l,open:!1}),children:e.jsxDEV(I,{onClose:()=>o({...l,open:!1}),severity:l.severity,sx:{width:"100%"},children:l.message},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:233,columnNumber:9},void 0)},void 0,!1,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:228,columnNumber:7},void 0)]},void 0,!0,{fileName:"/mnt/models/open-hivemind/src/client/src/pages/GuardsPage.tsx",lineNumber:111,columnNumber:5},void 0)};export{J as default};
