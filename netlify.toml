[build]
  command = "npm run build:netlify"
  functions = "dist/netlify/functions"
  publish = "dist/client"

[dev]
  command = "npm run dev"

# API requests go to the serverless function
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/server"
  status = 200

# Specific SPA routes handled by index.html (200 rewrite)
[[redirects]]
  from = "/webui/*"
  to = "/index.html"
  status = 200

[[redirects]]
  from = "/health/*"
  to = "/index.html"
  status = 200

[[redirects]]
  from = "/dashboard/*"
  to = "/index.html"
  status = 200

[[redirects]]
  from = "/admin/*"
  to = "/index.html"
  status = 200

# Catch-all for SPA (must be last)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
